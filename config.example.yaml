# Configuration Template
# Copy this file to config.yaml and fill in your actual values
# NEVER commit config.yaml with secrets to version control

# =============================================================================
# Data Preparation Settings
# =============================================================================
data_prep:
  # Path to input WSI (Whole Slide Image) files
  input_path: "/path/to/your/wsi/images"
  
  # Output directory for processed tiles
  output_path: "/path/to/outputs"
  
  # Tile size in pixels
  tile_size: 512
  
  # Magnification levels to extract (e.g., 10x, 20x, 40x)
  magnification_levels:
    - 10
    - 20
  
  # Overlap between tiles (0.0 - 1.0)
  tile_overlap: 0.1

# =============================================================================
# Tile Filtering Settings
# =============================================================================
tile_filter:
  # Enable tile filtering to remove background/noise
  enabled: true
  
  # Minimum tissue percentage threshold (0.0 - 1.0)
  tissue_threshold: 0.3
  
  # Minimum entropy threshold for meaningful content
  entropy_threshold: 4.0
  
  # Edge percentage threshold for excluding edge tiles
  edge_threshold: 0.02

# =============================================================================
# Segmentation Settings (Cellpose)
# =============================================================================
segmentation:
  # Cellpose model type: "cyto", "cyto2", "nuclei"
  model_type: "cyto2"
  
  # Cell probability threshold
  cell_prob_threshold: 0.0
  
  # Flow threshold for cell detection
  flow_threshold: 0.4
  
  # Use GPU for segmentation
  use_gpu: true
  
  # Cell diameter estimate (pixels, or null for auto)
  diameter: null

# =============================================================================
# Clustering Settings
# =============================================================================
clustering:
  # Clustering algorithm: "dbscan", "hdbscan"
  algorithm: "dbscan"
  
  # DBSCAN epsilon (neighborhood radius)
  eps: 0.5
  
  # Minimum samples for core point
  min_samples: 5
  
  # Use UMAP for dimensionality reduction
  use_umap: true
  
  # UMAP components (if use_umap is true)
  umap_components: 50
  
  # Use GPU for clustering (requires RAPIDS)
  use_gpu: true
  
  # Normalize features before clustering
  normalize: true

# =============================================================================
# Classification Settings (GPT-4o)
# =============================================================================
classification:
  # Model to use for classification
  model: "gpt-4o"
  
  # Maximum tokens for response
  max_tokens: 500
  
  # Temperature for response generation
  temperature: 0.1
  
  # Number of representative cells per cluster to classify
  cells_per_cluster: 5
  
  # Custom cell type categories (optional)
  # cell_types:
  #   - "epithelial"
  #   - "stromal"
  #   - "immune"
  #   - "other"

# =============================================================================
# Azure ML Settings
# =============================================================================
azure_ml:
  # Compute target name
  compute_target: "gpu-cluster"
  
  # VM size for compute
  vm_size: "Standard_NC6s_v3"
  
  # Environment name
  environment_name: "edu06-histology-env"
  
  # Experiment name
  experiment_name: "histology-analysis"
