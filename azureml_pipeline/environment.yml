name: edu06_env
channels:
  - rapidsai        # Highest priority for RAPIDS (cuML, cuPy)
  - pytorch         # For PyTorch with CUDA support
  - conda-forge     # Good source for umap-learn and others
  - nvidia          # For CUDA related components if not covered by base image/rapids
  - defaults
dependencies:
  - python=3.10
  - rapids=24.10    # Use RAPIDS 24.10 (stable release compatible with CUDA 11.8)
  - cuda-version=11.8  # Explicitly pin CUDA version for RAPIDS
  - openslide        # C library
  - openslide-python # Python wrapper
  - scikit-learn     # For CPU DBSCAN fallback, NearestNeighbors, normalize
  - matplotlib       # For k-distance plot
  - kneed            # For automatic elbow finding
  - umap-learn
  - numpy<2.0        # Pin to 1.x for PyTorch/cellpose compatibility
  - pillow           # For PIL Image processing
  - scikit-image
  - py-opencv        # For tile filtering component (correct conda-forge package name)
  - pytorch=2.1.*    # PyTorch 2.1.x (let conda resolve CUDA-compatible build)
  - torchvision=0.16.*  # Torchvision compatible with PyTorch 2.1
  - pytorch-cuda=11.8   # Ensure CUDA 11.8 support for PyTorch
  - pip
  - pip:
    - azure-ai-ml
    - azure-identity
    - azure-keyvault-secrets
    - python-dotenv
    - cellpose==4.0.8
    - openai
